describe('resti:', function() {
	var swapi;
	var swapiUrl = 'http://swapi.co/api';

	beforeEach(function() {
		swapi = new resti(swapiUrl);
		jasmine.Ajax.install();
	});

	afterEach(function() {
		resti.reset();
		jasmine.Ajax.uninstall();
	});

	describe('send', function() {

		describe('when called with an object', function() {
			it('sets all values on data object', function() {
				swapi.send({
					'first': 'first'
				});
				expect(swapi.data).toEqual({
					'first': 'first'
				});
			});

			it('sends data with xhr', function() {
				swapi.send({
					'first': 'first'
				}).post();
				expect(jasmine.Ajax.requests.mostRecent().data()).toEqual({
					'first': 'first'
				});
			});
		});

		describe('when called with two string parameters sets correct values on the data object', function() {
			it('sets all values on data object', function() {
				swapi.send('first', 'first');
				expect(swapi.data).toEqual({
					'first': 'first'
				});
			});

			it('sends data with xhr', function() {
				swapi.send('first', 'first').post();
				expect(jasmine.Ajax.requests.mostRecent().data()).toEqual({
					'first': 'first'
				});
			});
		});

		describe('when called more than once', function() {
			it('sets all values on data object', function() {
				swapi.send({
					'first': 'first'
				});
				swapi.send({
					'second': 'second'
				});
				swapi.send('third', 'third');
				expect(swapi.data).toEqual({
					'first': 'first',
					'second': 'second',
					'third': 'third'
				});
			});

			it('sends all data with xhr', function() {
				swapi.send({
					'first': 'first'
				});
				swapi.send({
					'second': 'second'
				});
				swapi.send('third', 'third');
				swapi.post();
				expect(jasmine.Ajax.requests.mostRecent().data()).toEqual({
					'first': 'first',
					'second': 'second',
					'third': 'third'
				});
			});
		});

	});

});