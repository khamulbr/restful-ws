(function(app) {

	'use strict';

	function View(model) {
		if (!(this instanceof View)) return new View(model);
		this.model = model;
		this.init();
		return this;
	}

	View.prototype.init = function() {
		this.render();
		return this;
	};

	View.prototype.template = function() {
		return '<p class="title">' +
					this.model.attrs.title +
					'</p><a href="#" class="todo-remove">Remove</a></li>'
	};

	View.prototype.render = function() {
		this.element = document.createElement('li');
		this.element.classList.add('todo-item');
		this.update();
		this.removeBtn = this.element.querySelector('.todo-remove');
		app.dom.list.appendChild(this.element);
		this.addEvents();
		return this;
	};

	View.prototype.update = function() {
		this.element.innerHTML = this.template();
		return this;
	};

	View.prototype.addEvents = function() {
		var self = this;
		this.removeBtn.addEventListener('click', function(event) {
			event.preventDefault();
			self.model.remove(function(err, res) {
				if (err) return;
				self.removeDom.call(self);
			});
		});
	};

	View.prototype.removeDom = function() {
		if (this.element.parentNode) this.element.parentNode.removeChild(this.element);
		return this;
	};

	app.View = View;

})(window.app);