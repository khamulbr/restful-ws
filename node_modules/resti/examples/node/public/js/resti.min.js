!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("resti",[],e):"object"==typeof exports?exports.resti=e():t.resti=e()}(this,function(){return function(t){function e(r){if(s[r])return s[r].exports
var n=s[r]={exports:{},id:r,loaded:!1}
return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var s={}
return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict"
var r=s(1).default,n=s(3).default
r.Response=n,t.exports=r},function(t,e,s){"use strict"
function r(t){if(t&&t.__esModule)return t
var e={}
if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])
return e.default=t,e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0})
var i=function(){function t(t,e){for(var s=0;s<e.length;s++){var r=e[s]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),u=s(2),a=r(u),o={},h=!0,c=function(){function t(e,s){return n(this,t),e||a.throwError("resti must be passed a base URL"),this.url=null,this.data=null,this.headers={},this.defaultHeaders={"Content-Type":a.types.json,Accept:a.types.json},this.parameters={},this.plugins={},this.beforeStack=[],this.stack=[],this.setURL(e,s),this._reqWithHeader=h,this}return i(t,[{key:"setURL",value:function(t,e){return this.url=t,e&&(this.url=a.buildURL(this.url,e)),this}},{key:"clone",value:function(e,s){var r=new t(e,s)
return r.headers=a.extend({},this.headers),r.plugins=a.extend({},this.plugins),r.stack=this.stack.slice(0),r.beforeStack=this.beforeStack.slice(0),r}},{key:"one",value:function(t,e){if(a.isAbsoluteUrl(t))return this.clone(t,e)
var s=a.buildURL(this.url,t)
return this.clone(s,e)}},{key:"many",value:function(t){if(a.isAbsoluteUrl(t))return this.clone(t)
var e=a.buildURL(this.url,t)
return this.clone(e)}},{key:"endpoint",value:function(t){if(a.isAbsoluteUrl(t))return this.clone(t)
var e=a.buildURL(this.url,t)
return this.clone(e)}},{key:"set",value:function(t,e){return a.isObject(t)?a.forIn(t,function(t,e){this.set(t,e)},this):this.headers[t]=a.types[e]||e,this}},{key:"using",value:function(t,e){return t&&!e?!!this.headers[t]:!(!t||!e)&&(!!this.headers[t]&&this.headers[t]==e)}},{key:"header",value:function(t){return t=a.types[t]||t,!!this.headers[t]&&this.headers[t]}},{key:"type",value:function(t){return arguments.length?(this.set("Content-Type",a.types[t]||t),this):this.header("Content-Type")}},{key:"accept",value:function(t){return arguments.length?(this.set("Accept",a.types[t]||t),this):this.header("Accept")}},{key:"reqWithHeader",value:function(t){return this._reqWithHeader=t,this}},{key:"params",value:function(t,e){return a.isObject(t)?a.forIn(t,function(t,e){this.params(t,e)},this):this.parameters[t]=e,this}},{key:"parse",value:function(t){return this._parse=t,this}},{key:"before",value:function(t,e){return a.isFunction(t)&&(e=t,t=null),this.beforeStack.push({method:t,handle:e}),this}},{key:"use",value:function(t,e){return a.isFunction(t)&&(e=t,t=null),this.stack.push({method:t,handle:e}),this}},{key:"reset",value:function(){return this.headers={},this.parameters={},this.stack=[],this.data={},this}},{key:"send",value:function(t){var e=this.type()
return a.isObject(t)&&a.isObject(this.data)?this.data=a.extend(this.data,t):a.isString(t)?(e||this.type("form"),e=this.type(),e==a.types.form?this.data=this.data?this.data+"&"+t:t:this.data=this.data?this.data+t:""+t):this.data=t,this}},{key:"startMiddleware",value:function(t,e,s){function r(){var u=t[i++]
if(u)return u.method&&!e!=u.method?r():void n(u.handle,s,r)}function n(t,e,s){return t.call(u,e,s)}var i=0,u=this
r()}},{key:"get",value:function(t){var e="GET"
return this.end(e,t),this}},{key:"post",value:function(t){var e="POST"
return this.end(e,t),this}},{key:"put",value:function(t){var e="PUT"
return this.end(e,t),this}},{key:"patch",value:function(t){var e="PATCH"
return this.end(e,t),this}},{key:"head",value:function(t){var e="HEAD"
return this.end(e,t),this}},{key:"remove",value:function(t){var e="DELETE"
return this.end(e,t),this}},{key:"options",value:function(t){var e="OPTIONS"
return this.end(e,t),this}},{key:"end",value:function(e,s){function r(){u.open(this.method.toUpperCase(),d,!0),a.setHeaders(u,this.headers),f&&null!==l&&(l=f(l)),u.send(l)}var n=this,i=this.stack.splice(0),u=a.getXHR(),c=this.parameters
this.method=e.toLowerCase()
var l=a.objectSize(this.data)&&a.methodShouldHavePayload(this.method)?this.data:null,d=a.objectSize(c)?a.setParams(this.url,c):this.url,f=a.serializers[this.type()];(this._reqWithHeader===!0||this._reqWithHeader!==!1&&h===!0)&&this.set("X-Requested-With","XMLHttpRequest"),this.defaultHeaders=a.extend({},this.defaultHeaders,o),this.headers=a.extend({},this.defaultHeaders,this.headers),u.onreadystatechange=function(){if(4===this.readyState){var e=new t.Response(n.method,u,n)
s&&a.isFunction(s)&&i.push({handle:s}),n.startMiddleware(i,n.method,e)}},this.before(r)
var p=this.beforeStack.splice(0)
return this.startMiddleware(p,this.method,n),this}}],[{key:"set",value:function(e,s){a.isObject(e)?a.forIn(e,function(e,s){t.set(e,s)}):o[e]=a.types[s]||s}},{key:"reqWithHeader",value:function(t){h=t}},{key:"reset",value:function(){o={},h=!0}}]),t}()
e.default=c},function(t,e){"use strict"
function s(t){return T.test(t)}function r(t){throw new Error(t)}function n(t){return Object.prototype.toString.call(t)}function i(t){return"[object Object]"===n(t)}function u(t){return"[object Function]"===n(t)}function a(t){return"[object String]"===n(t)}function o(t){if(!i(t))return t
var e=[]
for(var s in t)null!==t[s]&&e.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]))
return e.join("&")}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t){for(var e=1,s=arguments.length;e<s;e++){var r=arguments[e]
for(var n in r)h(r,n)&&(t[n]=r[n])}return t}function l(t,e,s){s=s||t
for(var r in t)h(t,r)&&e.call(s,r,t[r])}function d(t){var e,s=0
for(e in t)h(t,e)&&s++
return s}function f(t,e){return t.slice(0,e.length)==e}function p(t,e){return t.slice(-e.length)==e}function v(t){return t+="",f(t,"/")&&(t=t.substring(1)),p(t,"/")&&(t=t.substring(0,t.length-1)),t}function y(t,e){return t=v(t),e=v(e),t+"/"+e+"/"}function b(){if(window.XMLHttpRequest)return new XMLHttpRequest
try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}}function m(t,e,s){return i(e)?l(e,function(e,s){m(t,e,s)}):t.setRequestHeader(e,s),t}function k(t,e){var s
return d(e)&&!p(t,"?")&&(t+="?"),l(e,function(e,r){s=e+"="+r+"&",t+=s}),p(t,"&")&&(t=t.slice(0,-1)),t}function x(t){return t>=200&&t<300}function w(t){try{return JSON.parse(t.responseText)}catch(e){return t.responseText}}function j(t){for(var e,s,r=t.split(/\r?\n/),t={},n=0,i=r.length;n<i;n++){var u=r[n].split(":")
e=u[0],s=u[1],e&&s&&(t[e.trim()]=s.trim())}return t}function g(t){return H.indexOf(t)>=-1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAbsoluteUrl=s,e.throwError=r,e.toString=n,e.isObject=i,e.isFunction=u,e.isString=a,e.serialize=o,e.hasProp=h,e.extend=c,e.forIn=l,e.objectSize=d,e.startsWith=f,e.endsWith=p,e.trimSlashes=v,e.buildURL=y,e.getXHR=b,e.setHeaders=m,e.setParams=k,e.isSuccess=x,e.parseResponseText=w,e.parseHeaders=j,e.methodShouldHavePayload=g
var H=["post","patch","put"],T=/^https?:\/\//i
e.types={html:"text/html",json:"application/json",xml:"application/xml",form:"application/x-www-form-urlencoded"},e.serializers={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify}},function(t,e,s){"use strict"
function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0})
var n=function(){function t(t,e){for(var s=0;s<e.length;s++){var r=e[s]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),i=s(2),u=function(){function t(e,s,n){return r(this,t),this.method=e,this.resource=n,this.xhr=s,this.url=this.xhr.responseURL,this.statusText=this.xhr.statusText,this.headers=(0,i.parseHeaders)(this.xhr.getAllResponseHeaders()),this.setMethod(e),this.setStatus(this.xhr.status),this.type=this.xhr.getResponseHeader("content-type"),this.body=this.parse(),this}return n(t,[{key:"parse",value:function(){return"head"==this.method?this.xhr.responseText||null:this.resource._parse?this.resource._parse(this.xhr.responseText,this):(0,i.parseResponseText)(this.xhr)}},{key:"setMethod",value:function(t){return this.get="get"==t,this.post="post"==t,this.put="put"==t,this.patch="patch"==t,this.head="head"==t,this.del="delete"==t,this.options="options"==t,this}},{key:"setStatus",value:function(t){var e=t/100|0
return this.status=t,this.statusType=e,this.ok=2==e,this.info=1==e,this.clientError=4==e,this.serverError=5==e,this.error=!(!this.clientError&&!this.serverError),this.notFound=404==this.status,this.accepted=202==this.status,this.forbidden=403==this.status,this.badRequest=400==this.status,this.unauthorized=401==this.status,this.notAcceptable=406==this.status,this.noContent=204==this.status||1223==this.status,this}},{key:"redirect",value:function(t){return(0,i.isAbsoluteUrl)(t)||(t=window.location.host+t),window.location.assign(t),this}}]),t}()
e.default=u}])})
