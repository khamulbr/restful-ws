!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("resti",[],e):"object"==typeof exports?exports.resti=e():t.resti=e()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports
var n=r[i]={exports:{},id:i,loaded:!1}
return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={}
return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict"
var i=r(1).default,n=r(3).default
i.Response=n,t.exports=i},function(t,e,r){"use strict"
function i(t){if(t&&t.__esModule)return t
var e={}
if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])
return e.default=t,e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0})
var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),a=r(2),o=i(a),u={},h=!0,l=!1,c={"Content-Type":o.types.json,Accept:o.types.json},d=function(){function t(e,r){return n(this,t),e||o.throwError("resti must be passed a base URL"),this.url=null,this.data={},this.headers=o.extend({},c,u),this.parameters={},this.parser=null,this.beforeStack=[],this.stack=[],this.setURL(e,r),this._reqWithHeader=!!h,this._trailingSlashes=!!l,this}return s(t,[{key:"setURL",value:function(t,e){return this.url=t,e&&(this.url=o.buildURL(this.url,e,!!l)),this}},{key:"clone",value:function(e,r){var i=new t(e,r)
return i.headers=o.extend({},this.headers),i.stack=this.stack.slice(0),i.beforeStack=this.beforeStack.slice(0),i.parser=this.parser,i}},{key:"one",value:function(t,e){if(!t)return this.clone(this.url)
if(o.isAbsoluteUrl(t))return this.clone(t,e)
var r=o.buildURL(this.url,t,!!this._trailingSlashes)
return this.clone(r,e)}},{key:"many",value:function(t){if(!t)return this.clone(this.url)
if(o.isAbsoluteUrl(t))return this.clone(t)
var e=o.buildURL(this.url,t,!!this._trailingSlashes)
return this.clone(e)}},{key:"endpoint",value:function(t){if(!t)return this.clone(this.url)
if(o.isAbsoluteUrl(t))return this.clone(t)
var e=o.buildURL(this.url,t,!!this._trailingSlashes)
return this.clone(e)}},{key:"header",value:function(t,e){if(o.isObject(t))o.forIn(t,function(t,e){this.header(t,e)},this)
else{if(1==arguments.length)return!!this.headers[t]&&this.headers[t]
e===!1?delete this.headers[t]:this.headers[t]=o.types[e]||e}return this}},{key:"using",value:function(t,e){var r=this
if(t&&!e){if(o.isObject(t)){var i=!0
return o.forIn(t,function(t,e){i=!!r.headers[t]&&r.headers[t]==(o.types[e]||e)}),i}return!!this.headers[t]}return!(!t||!e)&&(!!this.headers[t]&&this.headers[t]==(o.types[e]||e))}},{key:"type",value:function(t){return arguments.length?(this.header("Content-Type",o.types[t]||t),this):this.header("Content-Type")}},{key:"accept",value:function(t){return arguments.length?(this.header("Accept",o.types[t]||t),this):this.header("Accept")}},{key:"enableReqWithHeader",value:function(){return this._reqWithHeader=!0,this}},{key:"disableReqWithHeader",value:function(){return this._reqWithHeader=!1,this}},{key:"enableTrailingSlashes",value:function(){return this._trailingSlashes=!0,this}},{key:"disableTrailingSlashes",value:function(){return this._trailingSlashes=!1,this}},{key:"params",value:function(t,e){return o.isObject(t)?o.forIn(t,function(t,e){this.params(t,e)},this):this.parameters[t]=e,this}},{key:"parse",value:function(t){return this.parser=t,this}},{key:"before",value:function(t,e){return o.isFunction(t)&&(e=t,t=null),this.beforeStack.push({method:t,handle:e}),this}},{key:"use",value:function(t,e){return o.isFunction(t)&&(e=t,t=null),this.stack.push({method:t,handle:e}),this}},{key:"reset",value:function(){return this.headers={},this.parameters={},this.beforeStack=[],this._trailingSlashes=!!l,this.stack=[],this.data={},this}},{key:"send",value:function(t,e){if(o.isObject(t)&&o.isObject(this.data))this.data=o.extend(this.data,t)
else if(o.isString(t))if(e)this.data[t]=e
else for(var r=t.split("&"),i=0,n=r.length;i<n;i++){var s=r[i]
s=s.split("="),this.data[s[0]]=s[1]}else this.data=t
return this}},{key:"urlContains",value:function(t){return o.stringContains(this.url,t)}},{key:"startMiddleware",value:function(t,e,r){function i(){var s=t[n++]
if(s)return s.method&&e!=s.method?i():void o.callMiddleware(s.handle,r,i)}var n=0
i()}},{key:"abort",value:function(){return this.xhr&&this.xhr.abort(),this.aborted=!0,this}},{key:"get",value:function(t){var e="GET"
return this.end(e,t),this}},{key:"post",value:function(t){var e="POST"
return this.end(e,t),this}},{key:"put",value:function(t){var e="PUT"
return this.end(e,t),this}},{key:"patch",value:function(t){var e="PATCH"
return this.end(e,t),this}},{key:"head",value:function(t){var e="HEAD"
return this.end(e,t),this}},{key:"remove",value:function(t){var e="DELETE"
return this.end(e,t),this}},{key:"options",value:function(t){var e="OPTIONS"
return this.end(e,t),this}},{key:"end",value:function(e,r){delete this.aborted
var i=this,n=this.stack.slice(0),s=this.xhr=o.getXHR(),a=this.parameters,u=this.type()
this.method=e.toLowerCase()
var l=o.objectSize(a)?o.setParams(this.url,a):this.url,c=o.serializers[u]
if((this._reqWithHeader===!0||this._reqWithHeader!==!1&&h===!0)&&this.header("X-Requested-With","XMLHttpRequest"),s.onreadystatechange=function(){if(4===this.readyState){var e=new t.Response(i.method,s,i)
r&&o.isFunction(r)&&n.push({handle:r}),this.aborted||i.startMiddleware(n,i.method,e),delete this.xhr}},this.before(function(){var t=o.objectSize(this.data)&&o.methodShouldHavePayload(this.method)?this.data:null
c&&null!=t&&(t=c(t)),u==o.types.form&&"get"!=this.method&&"head"!=this.method&&(l+="?"+t,t=null),s.open(this.method.toUpperCase(),l,!0),o.setHeaders(s,this.headers),s.send(t)}),!this.aborted){var d=this.beforeStack.slice(0)
return this.startMiddleware(d,this.method,i),this}}}],[{key:"header",value:function(e,r){o.isObject(e)?o.forIn(e,function(e,r){t.header(e,r)}):u[e]=o.types[r]||r}},{key:"enableReqWithHeader",value:function(){h=!0}},{key:"disableReqWithHeader",value:function(){h=!1}},{key:"reset",value:function(){u={},h=!0,l=!1}},{key:"enableTrailingSlashes",value:function(){l=!0}},{key:"disableTrailingSlashes",value:function(){l=!0}}]),t}()
e.default=d},function(t,e){"use strict"
function r(t){return R.test(t)}function i(t){throw new Error(t)}function n(t){return Object.prototype.toString.call(t)}function s(t){return"[object Object]"===n(t)}function a(t){return t&&"function"==typeof t}function o(t){return"[object String]"===n(t)}function u(t){if(!s(t))return t
var e=[]
for(var r in t)null!==t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]))
return e.join("&")}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t){for(var e=1,r=arguments.length;e<r;e++){var i=arguments[e]
for(var n in i)h(i,n)&&(t[n]=i[n])}return t}function c(t,e,r){r=r||t
for(var i in t)h(t,i)&&e.call(r,i,t[i])}function d(t){var e=0,r=void 0
for(r in t)h(t,r)&&e++
return e}function f(t,e){return t.slice(0,e.length)==e}function p(t,e){return t.slice(-e.length)==e}function v(t,e){return~t.indexOf(e)}function y(t){return t+="",f(t,"/")&&(t=t.substring(1)),p(t,"/")&&(t=t.substring(0,t.length-1)),t}function b(t,e,r){var i=y(t),n=y(e),s=i+"/"+n
return r&&(s+="/"),s}function k(){if(window.XMLHttpRequest)return new XMLHttpRequest
try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}}function m(t,e,r){return s(e)?c(e,function(e,r){m(t,e,r)}):t.setRequestHeader(e,r),t}function x(t,e){var r=void 0
return d(e)&&!p(t,"?")&&(t+="?"),c(e,function(e,i){r=e+"="+i+"&",t+=r}),p(t,"&")&&(t=t.slice(0,-1)),t}function g(t){return t>=200&&t<300}function w(t){try{return JSON.parse(t.responseText)}catch(e){return t.responseText}}function S(t){for(var e=t.split(/\r?\n/),r={},i=void 0,n=void 0,s=0,a=e.length;s<a;s++){var o=e[s].split(":")
i=o[0],n=o[1],i&&n&&(r[i.trim()]=n.trim())}return r}function j(t){return O.indexOf(t)>=-1}function T(t){r(t)||(t=window.location.host+t),window.location.assign(t)}function H(t,e,r){return t.call(e,e,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.isAbsoluteUrl=r,e.throwError=i,e.toString=n,e.isObject=s,e.isFunction=a,e.isString=o,e.serialize=u,e.hasProp=h,e.extend=l,e.forIn=c,e.objectSize=d,e.startsWith=f,e.endsWith=p,e.stringContains=v,e.trimSlashes=y,e.buildURL=b,e.getXHR=k,e.setHeaders=m,e.setParams=x,e.isSuccess=g,e.parseResponseText=w,e.parseHeaders=S,e.methodShouldHavePayload=j,e.replaceWindowLocation=T,e.callMiddleware=H
var O=["post","patch","put"],R=/^https?:\/\//i
e.types={html:"text/html",json:"application/json",xml:"application/xml",form:"application/x-www-form-urlencoded"},e.serializers={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify}},function(t,e,r){"use strict"
function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0})
var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=r(2),a=function(){function t(e,r,n){return i(this,t),this.method=e,this.resource=n,this.xhr=r,this.url=this.xhr.responseURL,this.statusText=this.xhr.statusText,this.headers=(0,s.parseHeaders)(this.xhr.getAllResponseHeaders()),this.setMethod(e),this.setStatus(this.xhr.status),this.type=this.xhr.getResponseHeader("content-type"),this.text=this.xhr.responseText,this.body=this.parse(),this}return n(t,[{key:"parse",value:function(){return"head"==this.method?this.xhr.responseText||null:this.resource.parser?this.resource.parser(this.xhr.responseText,this):(0,s.parseResponseText)(this.xhr)}},{key:"setMethod",value:function(t){return this.get="get"==t,this.post="post"==t,this.put="put"==t,this.patch="patch"==t,this.head="head"==t,this.del="delete"==t,this.options="options"==t,this}},{key:"setStatus",value:function(t){var e=t/100|0
return this.status=t,this.statusType=e,this.ok=2==e,this.info=1==e,this.clientError=4==e,this.serverError=5==e,this.error=!(!this.clientError&&!this.serverError),this.notFound=404==this.status,this.accepted=202==this.status,this.forbidden=403==this.status,this.badRequest=400==this.status,this.unauthorized=401==this.status,this.notAcceptable=406==this.status,this.noContent=204==this.status||1223==this.status,this}},{key:"redirect",value:function(t){return(0,s.replaceWindowLocation)(t),this}}]),t}()
e.default=a}])})
